<h1 class="mb-4 text-4xl md:mb-12 md:text-6xl leading-tight">
  Distance Calculator
</h1>
<div class="mb-6 text-lg md:mb-12 md:text-xl">
  <p class="py-2 leading-loose">
    This form fetches a list of users from a specific API and displays who live within a <br/>user-specified distance from
    <span class="text-white leading-none cursor-text font-semibold bg-gray-800 rounded px-2 py-1" title="<%-'Latitude: '+initialCoords.latitude+', Longitude: '+initialCoords.longitude %>">London City</span></p>
  </p>
  <p class="py-2" id="role-help">
    Please enter the radius in miles to begin the search
  </p>
</div>
<form
  id="distance-calculator"
  name="distance-calculator"
  action="/calculate"
  method="POST"
>
  <div class="flex flex-wrap">
    <div class="mb-6 md:mb-12 w-full">
      <label
        class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"
        for="distance"
      >
        <span class="text-sm font-normal md:text-lg">Distance</span>
        <input
          class="appearance-none block w-full bg-gray-100 text-gray-700 border border-gray-500 rounded py-3 px-4 my-3 text-lg leading-tight focus:outline-none focus:bg-white focus:border-gray-700"
          id="distance"
          name="distance"
          type="text"
          value=""
          pattern="^[0-9]\d{0,9}(\.\d{1,3})?%?$"
          aria-describedby="role-help"
          placeholder="Distance (in miles) e.g.: 15.50"
          required
        />
      </label>
      <% if (typeof errors !== "undefined") { for(var error in errors) { %>
      <p aria-live="polite" class="text-red-700 text-lg md:text-xl italic">
        <%= errors[error] %>
      </p>
      <% } } %>
    </div>
    <div class="w-full flex flex-col md:flex-row">
      <button
        class="flex-shrink-0 font-bold bg-black hover:bg-black border-black text-lg hover:bg-gray-800 hover:border-gray-800 text-sm border-4 text-white py-1 px-4 rounded mb-6 md:mb-auto"
        aria-label="Calculate Distance"
        role="button"
        type="submit"
      >
        Calculate Distance
      </button>
      <button
        class="flex-shrink-0 font-bold border-transparent border-4 text-black text-lg hover:text-gray-500 text-sm py-1 px-4 rounded"
        aria-label="Reset Form"
        role="button"
        type="reset"
      >
        Reset Form
      </button>
    </div>
  </div>
</form>

<% if(response && response.result) { %>
  <div class="my-12 border rounded-md shadow-md px-6 pt-3 pb-6 text-xl">
    <% if(response && response.result && Object.keys(response.result).length > 0) { %>
      <div class="mb-12">
        <p>Users who live <%= response.distance %> miles away from London are:</p>
        <ul class="my-6">
          <% for(var prop in response.result) { %>
            <li id="<%=response.result[prop]['id']%>">
              <%- response.result[prop]["first_name"]+" "+response.result[prop]["last_name"]+"&nbsp;  &mdash;&nbsp;<span class='italic'>"+response.result[prop]["email"]+"</span>" %>
  
            </li>
          <% } %>
        </ul>

      </div>
    <% } else {%>
      <p class="mt-2 mb-4">Sorry, we could not find any data for users living <%= response.distance %> mile(s) away from London</p>
    <% } %>
    <a
      class="py-1 px-4 font-bold bg-black hover:bg-black border-black text-lg hover:bg-gray-800 hover:border-gray-800 text-sm border-4 text-white rounded"
      aria-label="Clear Results"
      role="link"
      href="/"
    >
      Clear Results
    </a>
  </div>
<%} %>
